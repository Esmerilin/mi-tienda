<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda Tricolor (demo)</title>
  <meta name="description" content="Tienda temática tricolor (rojo/negro/blanco). No oficial.">
  <style>
    :root{--red:#D90429;--black:#0B0B0B;--white:#FFFFFF;--bg:#f6f7f9;--border:#e5e7eb;--muted:#6b7280;}
    *{box-sizing:border-box} html,body{margin:0}
    body{font-family:Arial, sans-serif;background:linear-gradient(#fff,var(--bg));color:#111}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);z-index:10}
    .bar{display:flex;align-items:center;gap:12px;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .crest{width:28px;height:28px;border-radius:6px;background:linear-gradient(90deg,var(--red) 0 33%,var(--white) 33% 66%,var(--black) 66% 100%);border:1px solid #111}
    .search{margin-left:auto;display:flex;gap:8px}
    .search input, .search select{height:36px;border:1px solid var(--border);border-radius:10px;padding:0 10px}
    .btn{height:36px;padding:0 12px;border:1px solid var(--border);background:#fff;border-radius:10px;cursor:pointer}
    .btn.primary{background:var(--red);border-color:var(--red);color:#fff}
    .badge{margin-left:6px;background:#111;color:#fff;border-radius:999px;min-width:18px;height:18px;display:inline-grid;place-items:center;font-size:12px;padding:0 4px}
    .hero{border-bottom:1px solid var(--border);background:repeating-linear-gradient(90deg,var(--black) 0 30px,var(--red) 30px 60px,var(--white) 60px 90px,var(--red) 90px 120px)}
    .hero .wrap{background:rgba(255,255,255,.9)}
    .hero .inner{display:grid;grid-template-columns:1.2fr .8fr;gap:18px;padding:24px 0}
    .grid{display:grid;grid-template-columns:260px 1fr;gap:16px;margin:20px 0}
    @media (max-width:900px){.grid{grid-template-columns:1fr} .hero .inner{grid-template-columns:1fr} .search{display:none}}
    .panel{background:#fff;border:1px solid var(--border);border-radius:14px}
    .pad{padding:14px}
    .filters .row{display:grid;gap:8px;margin-bottom:12px}
    .muted{color:var(--muted);font-size:13px}
    .products{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media (max-width:900px){.products{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:560px){.products{grid-template-columns:1fr}}
    .card{border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff;display:flex;flex-direction:column}
    .card img{width:100%;height:180px;object-fit:cover}
    .card .content{padding:12px;display:flex;flex-direction:column;gap:6px;flex:1}
    .price{font-weight:700;color:var(--red)}
    .tag{font-size:11px;padding:3px 8px;border-radius:999px;border:1px solid var(--border);background:#fff;display:inline-block;margin-right:6px}
    .row-between{display:flex;align-items:center;justify-content:space-between}
    .drawer{position:fixed;inset:0;display:none;z-index:50}
    .drawer.open{display:block}
    .drawer .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.25)}
    .drawer .side{position:absolute;top:0;right:0;width:430px;max-width:100%;height:100%;background:#fff;border-left:1px solid var(--border);display:flex;flex-direction:column}
    .side header{border-bottom:1px solid var(--border)} .side .content{padding:14px;overflow:auto;flex:1} .side footer{border-top:1px solid var(--border);padding:14px}
    .cart-item{display:flex;gap:10px;border:1px solid var(--border);border-radius:12px;padding:10px;margin-bottom:10px}
    .qty{display:flex;align-items:center;gap:6px} .qty input{width:54px;text-align:center;height:34px}
    .totals{display:grid;gap:6px;font-size:14px} .totals .big{font-size:16px;font-weight:700}
    .footer{margin-top:30px;border-top:1px solid var(--border);padding:16px 0;color:var(--muted);font-size:13px}
  </style>
</head>
<body>

<header>
    <div class="container bar">
      <div class="brand">
        <div class="crest" aria-hidden="true"></div>
        <div>
          <strong>Tienda Tricolor</strong>
          <div class="muted">Demo temática · No oficial</div>
        </div>
      </div>
      <div class="search">
        <input id="q" type="search" placeholder="Buscar productos">
        <select id="ord">
          <option value="destacados">Destacados</option>
          <option value="precio-asc">Precio: menor a mayor</option>
          <option value="precio-desc">Precio: mayor a menor</option>
          <option value="rating">Mejor calificados</option>
        </select>
      </div>
      <button id="openCart" class="btn">Carrito <span id="cartBadge" class="badge" style="display:none">0</span></button>
    </div>
  </header>

  <section class="hero">
    <div class="wrap">
      <div class="container inner">
        <div>
          <h1>Indumentaria & Accesorios Tricolor</h1>
          <p class="muted">Catálogo con filtros, carrito con totales y checkout de demostración.</p>
          <a href="#catalogo" class="btn primary">Ver catálogo</a>
        </div>
        <div class="panel pad" style="display:grid;place-items:center;font-weight:700">
          RAYAS ROJAS · NEGRAS · BLANCAS
        </div>
      </div>
    </div>
  </section>

  <main class="container">
    <div class="grid">
      <aside class="panel pad filters">
        <h3 style="margin:0 0 8px">Filtros</h3>
        <div class="row">
          <label class="muted">Categoría</label>
          <select id="cat"></select>
        </div>
        <div class="row">
          <label class="muted">Rango de precio (ARS)</label>
          <div style="display:flex;gap:8px">
            <input id="minPrice" type="number" value="0" min="0" step="100">
            <input id="maxPrice" type="number" value="200000" min="0" step="100">
          </div>
        </div>
        <div class="row">
          <label class="muted">Tags (coma)</label>
          <input id="tags" type="text" placeholder="ej: termo, invierno">
        </div>
        <div class="row">
          <button id="clearFilters" class="btn" style="width:100%">Limpiar filtros</button>
        </div>
      </aside>

      <section class="panel pad" id="catalogo">
        <div class="row-between" style="margin-bottom:8px">
          <strong>Catálogo</strong>
          <span id="count" class="muted">0 ítems</span>
        </div>
        <div id="products" class="products"></div>
      </section>
    </div>

    <footer class="footer">© 2025 Tienda temática tricolor (demo). No oficial.</footer>
  </main>

<!-- Drawer / Carrito -->
  <div id="drawer" class="drawer" aria-hidden="true">
    <div class="backdrop" role="button" aria-label="Cerrar"></div>
    <div class="side">
      <header>
        <div class="container bar" style="padding:10px 12px">
          <strong>Tu carrito</strong>
          <button id="closeCart" class="btn" style="margin-left:auto">Cerrar</button>
        </div>
      </header>
      <div class="content" id="cartItems"></div>
      <footer>
        <div class="totals" style="margin-bottom:12px">
          <div class="row-between"><span>Subtotal</span><span id="tSubtotal">$0</span></div>
          <div class="row-between"><span>Envío</span><span id="tShip">$0</span></div>
          <div class="row-between big"><span>Total</span><span id="tTotal">$0</span></div>
          <div class="muted">Envío gratis desde $120.000</div>
        </div>
        <div style="display:flex;gap:8px">
          <button id="clearCart" class="btn" style="flex:1">Vaciar</button>
          <button id="checkout" class="btn primary" style="flex:2">Finalizar compra</button>
        </div>
      </footer>
    </div>
  </div>

<script>
    // --- Datos de ejemplo ---
    const RAW_PRODUCTS = [
      { id:'cam-25-h', name:'Camiseta Titular', price:89999, category:'Indumentaria', rating:4.8, stock:20, img:'https://picsum.photos/seed/tricolor1/640/420', tags:['camiseta','rayas'], desc:'Franjas rojas, negras y blancas.' },
      { id:'bus-25',  name:'Buzo Invierno',    price:109999, category:'Indumentaria', rating:4.7, stock:12, img:'https://picsum.photos/seed/tricolor2/640/420', tags:['invierno','abrigo'], desc:'Polar técnico, ideal para frío.' },
      { id:'cap-01',  name:'Gorra Tricolor',   price:32999,  category:'Accesorios',   rating:4.4, stock:35, img:'https://picsum.photos/seed/tricolor3/640/420', tags:['gorra'], desc:'Visera plana, ajuste snapback.' },
      { id:'ter-01',  name:'Termo Acero 1L',   price:49999,  category:'Accesorios',   rating:4.5, stock:22, img:'https://picsum.photos/seed/tricolor4/640/420', tags:['termo','mate'], desc:'Acero doble pared, diseño rayas.' },
      { id:'mat-01',  name:'Mate + Bombilla',  price:19999,  category:'Accesorios',   rating:4.3, stock:40, img:'https://picsum.photos/seed/tricolor5/640/420', tags:['mate'], desc:'Set clásico con detalles rojos.' },
      { id:'moch-01', name:'Mochila Urbana',   price:38999,  category:'Accesorios',   rating:4.5, stock:18, img:'https://picsum.photos/seed/tricolor6/640/420', tags:['mochila'], desc:'Compartimento para notebook.' },
    ];

    // --- Estado ---
    const state = { q:'', cat:'todas', ord:'destacados', min:0, max:200000, tags:[], cart:{} };

    // --- Helpers ---
    const $ = (s,el=document)=>el.querySelector(s);
    const money = n => n.toLocaleString('es-AR',{style:'currency',currency:'ARS',maximumFractionDigits:0});
    const categories = () => ['todas', ...Array.from(new Set(RAW_PRODUCTS.map(p=>p.category)))];

    // --- Filtros / Orden ---
    function applyFilters(){
      let list=[...RAW_PRODUCTS];
      const q=state.q.trim().toLowerCase();
      if(q) list=list.filter(p => p.name.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q) || p.tags.some(t=>t.toLowerCase().includes(q)));
      if(state.cat!=='todas') list=list.filter(p=>p.category===state.cat);
      list=list.filter(p=>p.price>=state.min && p.price<=state.max);
      if(state.tags.length) list=list.filter(p=> state.tags.every(t => p.tags.map(x=>x.toLowerCase()).includes(t)));
      switch(state.ord){
        case 'precio-asc':  list.sort((a,b)=>a.price-b.price); break;
        case 'precio-desc': list.sort((a,b)=>b.price-a.price); break;
        case 'rating':      list.sort((a,b)=>b.rating-a.rating); break;
        default:            list.sort((a,b)=> (b.tags.includes('rayas')-a.tags.includes('rayas')) || (b.rating-a.rating));
      }
      return list;
    }

    function renderFilters(){
      const catSel = $('#cat');
      catSel.innerHTML = categories().map(c=>`<option value="${c}">${c}</option>`).join('');
      catSel.value = state.cat;
      $('#q').value = state.q; $('#ord').value = state.ord;
      $('#minPrice').value = state.min; $('#maxPrice').value = state.max;
      $('#tags').value = state.tags.join(', ');
    }

    // --- Render catálogo ---
    function renderProducts(){
      const list = applyFilters();
      $('#count').textContent = `${list.length} ítems`;
      $('#products').innerHTML = list.map(p=>`
        <article class="card">
          <img src="${p.img}" alt="${p.name}">
          <div class="content">
            <div class="row-between"><strong>${p.name}</strong><span class="price">${money(p.price)}</span></div>
            <div class="muted">${p.category} · ★ ${p.rating.toFixed(1)} · Stock: ${p.stock}</div>
            <div class="muted">${p.desc}</div>
            <div>${p.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
            <button class="btn primary" onclick="addToCart('${p.id}')">Añadir al carrito</button>
          </div>
        </article>
      `).join('');
    }

    // --- Carrito ---
    function addToCart(id){
      const p = RAW_PRODUCTS.find(x=>x.id===id);
      const cur = state.cart[id]?.qty || 0;
      state.cart[id] = {product:p, qty: Math.min(cur+1, p.stock)};
      renderCart(); openDrawer();
    }
    function setQty(id, qty){
      qty = Math.max(0, Math.min(qty, state.cart[id].product.stock));
      if(qty===0){ delete state.cart[id]; } else { state.cart[id].qty = qty; }
      renderCart();
    }
    function removeItem(id){ delete state.cart[id]; renderCart(); }
    function clearCart(){ state.cart = {}; renderCart(); }

    function cartTotals(){
      const items = Object.values(state.cart);
      const subtotal = items.reduce((s,i)=> s + i.product.price * i.qty, 0);
      const ship = subtotal>120000 ? 0 : (subtotal>0 ? 4500 : 0);
      return {subtotal, ship, total: subtotal+ship, count: items.reduce((n,i)=>n+i.qty,0)};
    }

    function renderCart(){
      const items = Object.values(state.cart);
      $('#cartItems').innerHTML = items.length ? items.map(({product, qty})=>`
        <div class="cart-item">
          <img src="${product.img}" alt="${product.name}" style="width:64px;height:64px;object-fit:cover;border-radius:8px">
          <div style="flex:1">
            <div class="row-between">
              <div><strong>${product.name}</strong><div class="muted">${money(product.price)}</div></div>
              <button class="btn" onclick="removeItem('${product.id}')">✕</button>
            </div>
            <div class="row-between" style="margin-top:8px">
              <div class="qty">
                <button class="btn" onclick="setQty('${product.id}', ${qty-1})">−</button>
                <input type="number" value="${qty}" min="0" max="${product.stock}" onchange="setQty('${product.id}', parseInt(this.value||0))">
                <button class="btn" onclick="setQty('${product.id}', ${qty+1})">＋</button>
              </div>
              <span class="muted">Stock: ${product.stock}</span>
            </div>
          </div>
        </div>
      `).join('') : '<p class="muted">Todavía no agregaste productos.</p>';

      const {subtotal, ship, total, count} = cartTotals();
      $('#tSubtotal').textContent = money(subtotal);
      $('#tShip').textContent = ship===0 ? 'Gratis' : money(ship);
      $('#tTotal').textContent = money(total);
      const badge = $('#cartBadge');
      if(count>0){ badge.style.display='inline-grid'; badge.textContent=count; } else { badge.style.display='none'; }
    }

    // --- Drawer ---
    function openDrawer(){ $('#drawer').classList.add('open'); }
    function closeDrawer(){ $('#drawer').classList.remove('open'); }

    // --- Eventos ---
    $('#openCart').addEventListener('click', openDrawer);
    $('#closeCart').addEventListener('click', closeDrawer);
    $('#drawer .backdrop').addEventListener('click', closeDrawer);

    $('#q').addEventListener('input', e=>{ state.q=e.target.value; renderProducts(); });
    $('#ord').addEventListener('change', e=>{ state.ord=e.target.value; renderProducts(); });
    $('#cat').addEventListener('change', e=>{ state.cat=e.target.value; renderProducts(); });
    $('#minPrice').addEventListener('change', e=>{ state.min=parseInt(e.target.value||0); renderProducts(); });
    $('#maxPrice').addEventListener('change', e=>{ state.max=parseInt(e.target.value||0); renderProducts(); });
    $('#tags').addEventListener('input', e=>{ state.tags = e.target.value.split(',').map(s=>s.trim().toLowerCase()).filter(Boolean); renderProducts(); });
    $('#clearFilters').addEventListener('click', ()=>{ state.q=''; state.cat='todas'; state.ord='destacados'; state.min=0; state.max=200000; state.tags=[]; renderFilters(); renderProducts(); });

    $('#clearCart').addEventListener('click', clearCart);
    $('#checkout').addEventListener('click', ()=>{
      const items = Object.values(state.cart);
      if(items.length===0) return alert('Tu carrito está vacío');
      alert('¡Gracias! Tu pedido fue registrado. (Demo)');
      clearCart(); closeDrawer();
    });

    // --- Init ---
    renderFilters();
    renderProducts();
    renderCart();
  </script>
</body>
</html>
